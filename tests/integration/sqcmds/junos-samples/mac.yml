description: 'Testing verbs for mac: show summarize unique'
tests:
- command: mac show --format=json
  data-directory: tests/data/junos/parquet-out/
  marks: mac show junos
  output: '[{"namespace": "junos", "hostname": "srv11", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth0", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp":
    1597189830521}, {"namespace": "junos", "hostname": "srv11", "vlan": 0, "macaddr":
    "33:33:00:00:00:01", "oif": "eth0", "remoteVtepIp": "", "bd": "", "flags": "permanent",
    "timestamp": 1597189830521}, {"namespace": "junos", "hostname": "srv11", "vlan":
    0, "macaddr": "33:33:ff:55:12:9d", "oif": "eth0", "remoteVtepIp": "", "bd": "",
    "flags": "permanent", "timestamp": 1597189830521}, {"namespace": "junos", "hostname":
    "srv11", "vlan": 0, "macaddr": "01:00:5e:00:00:01", "oif": "eth1", "remoteVtepIp":
    "", "bd": "", "flags": "permanent", "timestamp": 1597189830521}, {"namespace":
    "junos", "hostname": "srv11", "vlan": 0, "macaddr": "33:33:00:00:00:01", "oif":
    "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp": 1597189830521},
    {"namespace": "junos", "hostname": "srv11", "vlan": 0, "macaddr": "33:33:ff:b7:4d:0b",
    "oif": "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp":
    1597189830521}, {"namespace": "junos", "hostname": "srv12", "vlan": 0, "macaddr":
    "01:00:5e:00:00:01", "oif": "eth0", "remoteVtepIp": "", "bd": "", "flags": "permanent",
    "timestamp": 1597189830522}, {"namespace": "junos", "hostname": "srv12", "vlan":
    0, "macaddr": "33:33:00:00:00:01", "oif": "eth0", "remoteVtepIp": "", "bd": "",
    "flags": "permanent", "timestamp": 1597189830522}, {"namespace": "junos", "hostname":
    "srv12", "vlan": 0, "macaddr": "33:33:ff:55:12:9d", "oif": "eth0", "remoteVtepIp":
    "", "bd": "", "flags": "permanent", "timestamp": 1597189830522}, {"namespace":
    "junos", "hostname": "srv12", "vlan": 0, "macaddr": "01:00:5e:00:00:01", "oif":
    "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp": 1597189830522},
    {"namespace": "junos", "hostname": "srv12", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp":
    1597189830522}, {"namespace": "junos", "hostname": "srv12", "vlan": 0, "macaddr":
    "33:33:ff:d1:1f:da", "oif": "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent",
    "timestamp": 1597189830522}, {"namespace": "junos", "hostname": "srv21", "vlan":
    0, "macaddr": "01:00:5e:00:00:01", "oif": "eth0", "remoteVtepIp": "", "bd": "",
    "flags": "permanent", "timestamp": 1597189830521}, {"namespace": "junos", "hostname":
    "srv21", "vlan": 0, "macaddr": "33:33:00:00:00:01", "oif": "eth0", "remoteVtepIp":
    "", "bd": "", "flags": "permanent", "timestamp": 1597189830521}, {"namespace":
    "junos", "hostname": "srv21", "vlan": 0, "macaddr": "33:33:ff:55:12:9d", "oif":
    "eth0", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp": 1597189830521},
    {"namespace": "junos", "hostname": "srv21", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp":
    1597189830521}, {"namespace": "junos", "hostname": "srv21", "vlan": 0, "macaddr":
    "33:33:00:00:00:01", "oif": "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent",
    "timestamp": 1597189830521}, {"namespace": "junos", "hostname": "srv21", "vlan":
    0, "macaddr": "33:33:ff:f0:10:0b", "oif": "eth1", "remoteVtepIp": "", "bd": "",
    "flags": "permanent", "timestamp": 1597189830521}, {"namespace": "junos", "hostname":
    "srv22", "vlan": 0, "macaddr": "01:00:5e:00:00:01", "oif": "eth0", "remoteVtepIp":
    "", "bd": "", "flags": "permanent", "timestamp": 1597189830521}, {"namespace":
    "junos", "hostname": "srv22", "vlan": 0, "macaddr": "33:33:00:00:00:01", "oif":
    "eth0", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp": 1597189830521},
    {"namespace": "junos", "hostname": "srv22", "vlan": 0, "macaddr": "33:33:ff:55:12:9d",
    "oif": "eth0", "remoteVtepIp": "", "bd": "", "flags": "permanent", "timestamp":
    1597189830521}, {"namespace": "junos", "hostname": "srv22", "vlan": 0, "macaddr":
    "01:00:5e:00:00:01", "oif": "eth1", "remoteVtepIp": "", "bd": "", "flags": "permanent",
    "timestamp": 1597189830521}, {"namespace": "junos", "hostname": "srv22", "vlan":
    0, "macaddr": "33:33:00:00:00:01", "oif": "eth1", "remoteVtepIp": "", "bd": "",
    "flags": "permanent", "timestamp": 1597189830521}, {"namespace": "junos", "hostname":
    "srv22", "vlan": 0, "macaddr": "33:33:ff:f1:da:72", "oif": "eth1", "remoteVtepIp":
    "", "bd": "", "flags": "permanent", "timestamp": 1597189830521}, {"namespace":
    "junos", "hostname": "vqfx1", "vlan": 100, "macaddr": "02:05:86:71:9e:00", "oif":
    "vtep.32769", "remoteVtepIp": "9.9.9.2", "bd": "", "flags": "remote", "timestamp":
    1597189831636}, {"namespace": "junos", "hostname": "vqfx1", "vlan": 100, "macaddr":
    "08:00:27:b7:4d:0b", "oif": "xe-0/0/1.0", "remoteVtepIp": "", "bd": "", "flags":
    "", "timestamp": 1597189831636}, {"namespace": "junos", "hostname": "vqfx1", "vlan":
    100, "macaddr": "08:00:27:f0:10:0b", "oif": "vtep.32769", "remoteVtepIp": "9.9.9.2",
    "bd": "", "flags": "remote", "timestamp": 1597189831636}, {"namespace": "junos",
    "hostname": "vqfx1", "vlan": 200, "macaddr": "02:05:86:71:9e:00", "oif": "vtep.32769",
    "remoteVtepIp": "9.9.9.2", "bd": "", "flags": "remote", "timestamp": 1597189831636},
    {"namespace": "junos", "hostname": "vqfx1", "vlan": 200, "macaddr": "08:00:27:d1:1f:da",
    "oif": "xe-0/0/2.0", "remoteVtepIp": "", "bd": "", "flags": "", "timestamp": 1597189831636},
    {"namespace": "junos", "hostname": "vqfx1", "vlan": 200, "macaddr": "08:00:27:f1:da:72",
    "oif": "vtep.32769", "remoteVtepIp": "9.9.9.2", "bd": "", "flags": "remote", "timestamp":
    1597189831636}, {"namespace": "junos", "hostname": "vqfx2", "vlan": 100, "macaddr":
    "02:05:86:71:1c:00", "oif": "vtep.32769", "remoteVtepIp": "9.9.9.1", "bd": "",
    "flags": "remote", "timestamp": 1597189831905}, {"namespace": "junos", "hostname":
    "vqfx2", "vlan": 100, "macaddr": "08:00:27:b7:4d:0b", "oif": "vtep.32769", "remoteVtepIp":
    "9.9.9.1", "bd": "", "flags": "remote", "timestamp": 1597189831905}, {"namespace":
    "junos", "hostname": "vqfx2", "vlan": 100, "macaddr": "08:00:27:f0:10:0b", "oif":
    "xe-0/0/1.0", "remoteVtepIp": "", "bd": "", "flags": "", "timestamp": 1597189831905},
    {"namespace": "junos", "hostname": "vqfx2", "vlan": 200, "macaddr": "02:05:86:71:1c:00",
    "oif": "vtep.32769", "remoteVtepIp": "9.9.9.1", "bd": "", "flags": "remote", "timestamp":
    1597189831905}, {"namespace": "junos", "hostname": "vqfx2", "vlan": 200, "macaddr":
    "08:00:27:d1:1f:da", "oif": "vtep.32769", "remoteVtepIp": "9.9.9.1", "bd": "",
    "flags": "remote", "timestamp": 1597189831905}, {"namespace": "junos", "hostname":
    "vqfx2", "vlan": 200, "macaddr": "08:00:27:f1:da:72", "oif": "xe-0/0/2.0", "remoteVtepIp":
    "", "bd": "", "flags": "", "timestamp": 1597189831905}]'
- command: mac show --columns=hostname --format=json
  data-directory: tests/data/junos/parquet-out/
  marks: mac show junos
  output: '[{"hostname": "srv11"}, {"hostname": "srv11"}, {"hostname": "srv11"}, {"hostname":
    "srv11"}, {"hostname": "srv11"}, {"hostname": "srv11"}, {"hostname": "srv12"},
    {"hostname": "srv12"}, {"hostname": "srv12"}, {"hostname": "srv12"}, {"hostname":
    "srv12"}, {"hostname": "srv12"}, {"hostname": "srv21"}, {"hostname": "srv21"},
    {"hostname": "srv21"}, {"hostname": "srv21"}, {"hostname": "srv21"}, {"hostname":
    "srv21"}, {"hostname": "srv22"}, {"hostname": "srv22"}, {"hostname": "srv22"},
    {"hostname": "srv22"}, {"hostname": "srv22"}, {"hostname": "srv22"}, {"hostname":
    "vqfx1"}, {"hostname": "vqfx1"}, {"hostname": "vqfx1"}, {"hostname": "vqfx1"},
    {"hostname": "vqfx1"}, {"hostname": "vqfx1"}, {"hostname": "vqfx2"}, {"hostname":
    "vqfx2"}, {"hostname": "vqfx2"}, {"hostname": "vqfx2"}, {"hostname": "vqfx2"},
    {"hostname": "vqfx2"}]'
- command: mac summarize --format=json
  data-directory: tests/data/junos/parquet-out/
  marks: mac summarize junos
  output: '{"junos": {"deviceCnt": 6, "totalMacsinNSCnt": 36, "uniqueMacCnt": 13,
    "uniqueVlanperHostStat": [0, 2, 0.0]}}'
- command: mac unique --columns=hostname --format=json
  data-directory: tests/data/junos/parquet-out/
  marks: mac unique junos
  output: '[{"hostname": "vqfx2", "count": 6}, {"hostname": "vqfx1", "count": 6},
    {"hostname": "srv22", "count": 6}, {"hostname": "srv21", "count": 6}, {"hostname":
    "srv12", "count": 6}, {"hostname": "srv11", "count": 6}]'
